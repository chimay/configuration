# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# vim: set filetype=conf :

# Variables {{{1

# Modificateur principal {{{2

# Mod1 = Alt
# Mod4 = Super
#
# On my box, Mod3 = menu key, configured with xmodmap
#
# I choose Mod3 because Mod1 and Mod4 are used in neovim & emacs
# bindings

set $mod Mod3

# }}}2

# Pavé numérique {{{2

# set $pave0=KP_0
# set $pave1=KP_1
# set $pave2=KP_2
# set $pave3=KP_3
# set $pave4=KP_4
# set $pave5=KP_5
# set $pave6=KP_6
# set $pave7=KP_7
# set $pave8=KP_8
# set $pave9=KP_9

set $pave0=Mod2+KP_Insert
set $pave1=Mod2+KP_End
set $pave2=Mod2+KP_Down
set $pave3=Mod2+KP_Next
set $pave4=Mod2+KP_Left
set $pave5=Mod2+KP_Begin
set $pave6=Mod2+KP_Right
set $pave7=Mod2+KP_Home
set $pave8=Mod2+KP_Up
set $pave9=Mod2+KP_Prior

# }}}2

# Espaces de travail {{{2

set $espace0 "0 Principal"
set $espace1 "1 Auxiliaire"
set $espace2 "2 Navigation"
set $espace3 "3 Graphique"

# }}}2

# }}}1

# Présentation {{{1

font pango:DejaVu Sans Mono 11 Bold

# class                 border  backgr. text    indicator	child_border

client.focused          #5b3c11 #5b3c11 #000000 #5b3c11		#341207
client.focused_inactive #5b3c11 #5b3c11 #000000 #5b3c11		#341207
client.unfocused        #5b3c11 #000000 #5b3C11 #5b3c11		#341207
client.urgent           #b21818 #000000 #b21818 #5b3c11		#341207

client.background		#000000

#hide_edge_borders both

# }}}1

# Options {{{1

default_orientation auto

workspace_layout default

workspace_auto_back_and_forth yes

# }}}1

# Propriétés automatiques des fenêtres {{{1

# Workspaces {{{2

# La flèche → est optionnelle

assign [class="Gvim"]    $espace0
assign [class="nvim-qt"] $espace0
assign [class="Emacs"]   $espace0

assign [class="qutebrowser"] $espace2
assign [class="Firefox"] $espace2

assign [class="net-sourceforge-jnlp-runtime-Boot"] $espace3
assign [class="sun-awt-X11-XFramePeer"] $espace3
assign [class="java-lang-Thread"] $espace3

# }}}2

# Mode flottant {{{2

for_window [class="yakuake"] floating enable
for_window [class="URxvt"] floating enable

for_window [class="qutebrowser"] layout tabbed
for_window [class="Firefox"] layout tabbed

for_window [class="Pavucontrol"] floating enable

for_window [class="MPlayer"] floating enable
for_window [class="Vlc"]     floating enable

for_window [class="net-sourceforge-jnlp-runtime-Boot"] floating enable
for_window [class="sun-awt-X11-XFramePeer"] floating enable
for_window [class="java-lang-Thread"] floating enable

for_window [class="XClock"]     floating enable
for_window [class="Clock"]     floating enable

for_window [class="Zenity"]     floating enable

for_window [class="Xfce4-appfinder"]     floating enable

# }}}2

# Dimensions {{{2

for_window [class="Xfce4-appfinder"] resize set 700 700

# }}}2

# Scratchpad {{{2

for_window [instance="deroulant"] floating enable
for_window [instance="deroulant"] move scratchpad

for_window [instance="calculatrice"] floating enable
for_window [instance="calculatrice"] move scratchpad

# }}}2

# }}}1

# Autostart {{{1

exec --no-startup-id ~/racine/config/windenv/i3/autostart.zsh

# Ne fonctionne pas. Pourquoi ?
# exec --no-startup-id urxvtc -name deroulant -geometry 70x20
# exec --no-startup-id urxvtc -name calculatrice -geometry 70x20 -fn "xft:monospace:size=12" -e calc

# }}}1

# Mode défaut {{{1

# Nagbar {{{2

# Bof

bindsym $mod+i exec "i3-nagbar -t warning \
	-m 'Bienvenue sur i3' \
	-b 'Sortir' '~/racine/shell/power/rofi-eteindre.zsh' \
	-b 'Lancer une application' '~/racine/shell/run/lance-rofi.zsh' \
	-b 'Terminal' 'urxvtc' \
	"

# }}}2

# Recharger, Relancer, Sortir {{{2

# reload the configuration file

bindsym $mod+Shift+C reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)

bindsym $mod+Shift+R restart

# exit i3 (logs you out of your X session)

bindsym $mod+Mod4+Q exit

# }}}2

# Fenêtres {{{2

bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

bindsym Mod4+Tab focus right
bindsym Mod4+Shift+Tab focus left
bindsym Mod4+Ctrl+Tab focus down

bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

bindsym $mod+Shift+X kill

# }}}2

# Hiérarchie {{{2

# Focus the parent container

bindsym $mod+BackSpace focus parent

# Focus the child container

bindsym $mod+Tab focus child

# }}}2

# Scission {{{2

bindsym $mod+h split h
bindsym $mod+v split v

# }}}2

# Layouts {{{2

bindsym $mod+f fullscreen

bindsym Mod4+F5 fullscreen

bindsym $mod+space layout toggle all

bindsym $mod+d layout default
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed

# }}}2

# Fenêtres flottantes {{{2

# toggle tiling / floating

bindsym $mod+Shift+F floating toggle

bindsym Mod4+F6 floating toggle

# change focus between tiling / floating windows

bindsym $mod+Mod1+F focus mode_toggle

bindsym Mod4+F7 focus mode_toggle

# }}}2

# Espaces de travail {{{2

bindsym $mod+w exec --no-startup-id ~/racine/shell/dialog/rofi-workspaces.zsh

bindsym Mod4+Ctrl+Left workspace prev
bindsym Mod4+Ctrl+Right workspace next

bindsym Mod4+F1 workspace $espace0
bindsym Mod4+F2 workspace $espace1
bindsym Mod4+F3 workspace $espace2
bindsym Mod4+F4 workspace $espace3

bindsym Mod4+Shift+F1 move workspace $espace0
bindsym Mod4+Shift+F2 move workspace $espace1
bindsym Mod4+Shift+F3 move workspace $espace2
bindsym Mod4+Shift+F4 move workspace $espace3

bindsym $mod+Shift+M exec i3-input \
	-F 'rename workspace to "%s"' \
	-P 'Nouveau nom du bureau: ' \
	-f 'pango:DejaVu Sans Mono 11 Bold'

# }}}2

# Signets de fenêtres {{{2

bindsym $mod+m exec i3-msg mark "$(zenity --entry --text 'Nom du signet')"
bindsym $mod+apostrophe exec i3-msg [con_mark="$(zenity --entry --text 'Nom du signet')"] focus

# bindsym $mod+m exec i3-input \
# 	-F 'mark %s' \
# 	-P 'Nom du signet: ' \
# 	-f 'pango:DejaVu Sans Mono 11 Bold'

# bindsym $mod+apostrophe exec i3-input \
# 	-F '[con_mark="%s"] focus' \
# 	-P 'Aller au signet: ' \
# 	-f 'pango:DejaVu Sans Mono 11 Bold'

# }}}2

# Système {{{2

bindsym $mod+r exec --no-startup-id ~/racine/shell/run/lance-rofi.zsh
bindsym $mod+colon exec --no-startup-id ~/racine/shell/run/lance-rofi.zsh

bindsym --whole-window $mod+button3 exec --no-startup-id ~/racine/shell/run/lance-rofi.zsh
bindsym --whole-window Mod4+button3 exec --no-startup-id ~/racine/shell/run/lance-rofi.zsh

bindsym Mod4+colon exec --no-startup-id ~/racine/shell/run/zshrun.sh

bindsym $mod+Shift+Q exec --no-startup-id ~/racine/shell/power/rofi-eteindre.zsh

bindsym $mod+Return exec yakuake
bindsym $mod+dollar exec konsole
bindsym $mod+asterisk exec urxvtc

bindsym $mod+z exec xset dpms force off

# Supporte les images png

bindsym $mod+l exec --no-startup-id i3lock -c "#341207" -i ~/graphix/wallpaper/geometry/A-chakras-02.png

# }}}2

# Applications {{{2

bindsym Mod4+Ctrl+V exec --no-startup-id ~/racine/shell/run/lance-gvim.zsh

bindsym Mod4+Ctrl+N exec --no-startup-id ~/racine/shell/run/lance-neovim-client.zsh
bindsym Mod4+Ctrl+Shift+N exec --no-startup-id ~/racine/shell/run/lance-neovim.zsh

bindsym Mod4+Ctrl+E exec --no-startup-id ~/racine/shell/run/lance-emacs-client.zsh
bindsym Mod4+Ctrl+Shift+E exec --no-startup-id ~/racine/shell/run/lance-emacs.zsh

bindsym Mod4+Ctrl+F exec firefox
bindsym Mod4+Ctrl+G exec geogebra
bindsym Mod4+Ctrl+M exec musescore
bindsym Mod4+Ctrl+O exec libreoffice
bindsym Mod4+Ctrl+Q exec qutebrowser
bindsym Mod4+Ctrl+S exec mp3splt-gtk
bindsym Mod4+Ctrl+X exec xclock
bindsym Mod4+Ctrl+Z exec zathura

bindsym Mod4+Ctrl+Shift+F exec filezilla
bindsym Mod4+Ctrl+Shift+V exec vlc

# }}}2

# Outils (scratchpad) {{{2

bindsym $mod+o move scratchpad
bindsym $mod+0 scratchpad show

# Lancement des outils

bindsym Mod4+Shift+d exec --no-startup-id urxvtc -name deroulant -geometry 70x20
bindsym Mod4+Shift+c exec --no-startup-id urxvtc -name calculatrice -geometry 70x20 -fn "xft:monospace:size=12" -e calc

# Affichage des outils

bindsym $mod+F1 [instance="deroulant"] scratchpad show ; \
	[instance="deroulant"] move position center ; \
	[instance="deroulant"] move up 100

bindsym $mod+F2 [instance="calculatrice"] scratchpad show ; \
	[instance="calculatrice"] move position center ; \
	[instance="calculatrice"] move up 100

# }}}2

# }}}1

# Mode préfixe {{{1

bindsym $mod+F12 mode "prefixe"

mode "prefixe" {

# Recharger, Relancer, Sortir {{{2

# reload the configuration file

bindsym Shift+C reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)

bindsym Shift+R restart

# exit i3 (logs you out of your X session)

bindsym Mod4+Q exit

# }}}2

# Fenêtres {{{2

bindsym Left  focus left
bindsym Down  focus down
bindsym Up    focus up
bindsym Right focus right

bindsym Shift+Left  move left
bindsym Shift+Down  move down
bindsym Shift+Up    move up
bindsym Shift+Right move right

bindsym Shift+X kill

# }}}2

# Hiérarchie {{{2

# Focus the parent container

bindsym BackSpace focus parent

# Focus the child container

bindsym Tab focus child

# }}}2

# Scission {{{2

bindsym h split h
bindsym v split v

# }}}2

# Layouts {{{2

bindsym f fullscreen

bindsym space layout toggle all

bindsym d layout default
bindsym s layout stacking
bindsym t layout tabbed

# }}}2

# Fenêtres flottantes {{{2

# toggle tiling / floating

bindsym Shift+F floating toggle

# change focus between tiling / floating windows

bindsym Mod1+F focus mode_toggle

# }}}2

# Espaces de travail {{{2

bindsym w exec --no-startup-id ~/racine/shell/dialog/rofi-workspaces.zsh

bindsym Ctrl+Left workspace prev
bindsym Ctrl+Right workspace next

bindsym F1 workspace $espace0
bindsym F2 workspace $espace1
bindsym F3 workspace $espace2
bindsym F4 workspace $espace3

bindsym Shift+F1 move workspace $espace0
bindsym Shift+F2 move workspace $espace1
bindsym Shift+F3 move workspace $espace2
bindsym Shift+F4 move workspace $espace3

# }}}2

# Système {{{2

bindsym ampersand exec yakuake
bindsym dollar exec konsole
bindsym asterisk exec urxvtc

bindsym r exec --no-startup-id ~/racine/shell/run/lance-rofi.zsh

bindsym colon exec --no-startup-id ~/racine/shell/run/lance-rofi.zsh

bindsym Shift+Q exec --no-startup-id ~/racine/shell/power/rofi-eteindre.zsh

bindsym z exec xset dpms force off

# Supporte les images png

bindsym l exec --no-startup-id i3lock -c "#341207" -i ~/graphix/wallpaper/geometry/A-chakras-02.png

# }}}2

# Back to normal {{{2

bindsym q mode "default"
bindsym Return mode "default"
bindsym KP_Enter mode "default"
bindsym Escape mode "default"

# }}}2

}

# }}}1

# Mode redimensionnement {{{1

# resize window (you can also use the mouse for that)

bindsym $mod+F11 mode "redimensionnement"

mode "redimensionnement" {

# These bindings trigger as soon as you enter the resize mode

# They resize the border in the direction you pressed, e.g.
# when pressing left, the window is resized so that it has
# more space on its left

bindsym h resize shrink left 5 px or 5 ppt
bindsym Shift+H resize grow left 5 px or 5 ppt

bindsym j resize shrink down 5 px or 5 ppt
bindsym Shift+J resize grow down 5 px or 5 ppt

bindsym k resize shrink up 5 px or 5 ppt
bindsym Shift+K resize grow up 5 px or 5 ppt

bindsym l resize shrink right 5 px or 5 ppt
bindsym Shift+L resize grow right 5 px or 5 ppt

# same bindings, but for the arrow keys

bindsym Left resize shrink left 5 px or 5 ppt
bindsym Shift+Left resize grow left 5 px or 5 ppt

bindsym Down resize shrink down 5 px or 5 ppt
bindsym Shift+Down resize grow down 5 px or 5 ppt

bindsym Up resize shrink up 5 px or 5 ppt
bindsym Shift+Up resize grow up 5 px or 5 ppt

bindsym Right resize shrink right 5 px or 5 ppt
bindsym Shift+Right resize grow right 5 px or 5 ppt

# Back to normal: Enter or Escape {{{2

bindsym q mode "default"
bindsym Return mode "default"
bindsym KP_Enter mode "default"
bindsym Escape mode "default"

# }}}2

}

# }}}1

# Mode applications {{{1

bindsym Mod4+F12 mode "applications"

mode "applications" {

bindsym v exec --no-startup-id ~/racine/shell/run/lance-gvim.zsh ; mode "default"

bindsym n exec --no-startup-id ~/racine/shell/run/lance-neovim-client.zsh ; mode "default"
bindsym Shift+N exec --no-startup-id ~/racine/shell/run/lance-neovim.zsh ; mode "default"

bindsym e exec --no-startup-id ~/racine/shell/run/lance-emacs-client.zsh ; mode "default"
bindsym Shift+E exec --no-startup-id ~/racine/shell/run/lance-emacs.zsh ; mode "default"

bindsym f exec firefox ; mode "default"
bindsym k exec konsole ; mode "default"
bindsym g exec geogebra ; mode "default"
bindsym l exec lxterminal ; mode "default"
bindsym m exec musescore ; mode "default"
bindsym o exec libreoffice ; mode "default"
bindsym p exec pcmanfm ; mode "default"
bindsym q exec qutebrowser ; mode "default"
bindsym s exec mp3splt-gtk ; mode "default"
bindsym u exec urxvtc ; mode "default"
bindsym x exec xclock ; mode "default"
bindsym y exec yakuake ; mode "default"
bindsym z exec zathura ; mode "default"

bindsym Shift+F exec filezilla ; mode "default"
bindsym Shift+Q exec qterminal ; mode "default"
bindsym Shift+V exec vlc ; mode "default"

# Back to normal {{{2

bindsym Mod4+q mode "default"
bindsym Return mode "default"
bindsym KP_Enter mode "default"
bindsym Escape mode "default"

# }}}2

}

# }}}1

# Mode outils (scratchpad) {{{1

# Visibilité indépendante des workspaces

bindsym Mod4+F11 mode "outils"

mode "outils" {

bindsym o move scratchpad

bindsym 0 scratchpad show

# Lancement des outils

bindsym d exec --no-startup-id urxvtc -name deroulant -geometry 70x20
bindsym c exec --no-startup-id urxvtc -name calculatrice -geometry 70x20 -fn "xft:monospace:size=12" -e calc

# Affichage des outils

bindsym dollar [instance="deroulant"] scratchpad show ; \
	[instance="deroulant"] move position center ; \
	[instance="deroulant"] move up 100

bindsym equal [instance="calculatrice"] scratchpad show ; \
	[instance="calculatrice"] move position center ; \
	[instance="calculatrice"] move up 100

# Back to normal {{{2

bindsym q mode "default"
bindsym Return mode "default"
bindsym KP_Enter mode "default"
bindsym Escape mode "default"

# }}}2

}

# }}}1

# Mode multimedia {{{1

bindsym Mod4+F9 mode "multimedia"

mode "multimedia" {

# Mixer {{{2

bindsym M         exec pavucontrol ; mode "default"

bindsym F10      exec --no-startup-id amixer -c 0 -- set Master 2dB+
bindsym F11      exec --no-startup-id amixer -c 0 -- set Master 2dB-
bindsym Mod4+F10 exec --no-startup-id amixer -c 0 -- set Master 4dB+
bindsym Mod4+F11 exec --no-startup-id amixer -c 0 -- set Master 4dB-

bindsym prior exec --no-startup-id amixer -c 0 -- set Master 2dB+
bindsym next  exec --no-startup-id amixer -c 0 -- set Master 2dB-
bindsym home  exec --no-startup-id amixer -c 0 -- set Master 4dB+
bindsym end   exec --no-startup-id amixer -c 0 -- set Master 4dB-

# bindsym F11      exec --no-startup-id pamixer --decrease 5
# bindsym F11      exec --no-startup-id pamixer --increase 5
# bindsym Mod4+F10 exec --no-startup-id pamixer --decrease 10
# bindsym Mod4+F11 exec --no-startup-id pamixer --increase 10

# }}}2

# CMUS {{{2

bindsym F9        exec --no-startup-id cmus-remote -C player-pause ; mode "default"

bindsym space     exec --no-startup-id cmus-remote -C player-pause

bindsym BackSpace exec --no-startup-id cmus-remote -C 'seek 0'

bindsym n         exec --no-startup-id cmus-remote -C player-next
bindsym p         exec --no-startup-id cmus-remote -C player-prev

# }}}2

# MPC {{{2

bindsym Mod4+F9        exec --no-startup-id mpc --no-status toggle ; mode "default"

bindsym Mod4+space     exec --no-startup-id mpc --no-status toggle

bindsym Mod4+BackSpace exec --no-startup-id mpc --no-status seek 0:0

bindsym f         exec --no-startup-id mpc next
bindsym b         exec --no-startup-id mpc prev

bindsym Shift+F   exec --no-startup-id mpc seek +1:00
bindsym Shift+B   exec --no-startup-id mpc seek -1:00

# }}}2

# Back to normal {{{2

bindsym q mode "default"
bindsym Return mode "default"
bindsym KP_Enter mode "default"
bindsym Escape mode "default"

# }}}2

}

# }}}1

# Souris {{{1

focus_follows_mouse no

# Use Mouse+$mod to drag floating windows to their wanted position

floating_modifier $mod

# }}}1

# Barres de status {{{1

# Workspaces, infos, tray, ...

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)

# Barre inférieure {{{2

bar {

	i3bar_command /usr/bin/i3bar
	status_command i3status -c ~/racine/config/windenv/i3/i3status.conf

	mode dock
	position bottom

	workspace_buttons yes
	binding_mode_indicator yes

	font pango:DejaVu Sans Mono 11 Bold

	colors {
		background #000000
		statusline #5B3C11
		separator #341207

		# class            border  backgr. text

		focused_workspace  #5B3C11 #5B3C11 #000000
		active_workspace   #5B3C11 #000000 #5B3C11
		inactive_workspace #121212 #000000 #5B3C11
		urgent_workspace   #2f343a #000000 #88421D
	}

}

# }}}2

# Barre supérieure {{{2

bar {

	i3bar_command /usr/bin/i3bar
	status_command i3blocks -c ~/racine/config/windenv/i3/i3blocks.conf

	mode dock
	position top

	workspace_buttons yes
	binding_mode_indicator yes

	font pango:DejaVu Sans Mono 11 Bold

	colors {
		background #000000
		statusline #5B3C11
		separator #341207

		# class            border  backgr. text

		focused_workspace  #5B3C11 #5B3C11 #000000
		active_workspace   #5B3C11 #000000 #5B3C11
		inactive_workspace #121212 #000000 #5B3C11
		urgent_workspace   #2f343a #000000 #88421D
	}

}

# }}}2

# }}}1
